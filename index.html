<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Barcelona Viability Insights | Análisis Salarios vs Alquiler 2026
    </title>
    <meta
      name="description"
      content="Data product interactivo que analiza la viabilidad de vivir en Barcelona cruzando datos reales de salarios y alquileres."
    />

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Chart.js (VERSIÃ“N LIGERA) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/table-chart.css" />
    <link rel="stylesheet" href="css/responsive.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />

    <!-- Open Graph -->
    <meta property="og:title" content="Barcelona Viability Insights 2026" />
    <meta
      property="og:description"
      content="Â¿Se puede vivir en Barcelona con los salarios actuales? Análisis interactivo de datos reales."
    />
    <meta property="og:type" content="website" />
  </head>

  <body>
    <!-- ===== MENÃš SUPERIOR STICKY ===== -->
    <header class="main-header" id="mainHeader">
      <div class="container header-container">
        <div class="logo">
          <i class="fas fa-chart-line"></i>
          <h1>Barcelona Viability</h1>
        </div>

        <nav class="main-nav" id="mainNav">
          <ul class="nav-list">
            <li><a href="#hero" class="nav-link active">Inicio</a></li>
            <li><a href="#dashboard-section" class="nav-link">Dashboard</a></li>
            <li><a href="#insights-section" class="nav-link">Insights</a></li>
            <li>
              <a href="#methodology-section" class="nav-link">MetodologÃ­a</a>
            </li>
            <li><a href="#about-section" class="nav-link">About</a></li>
          </ul>
        </nav>

        <button
          class="mobile-menu-toggle"
          id="mobileMenuToggle"
          aria-label="Abrir menÃº"
        >
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </header>

    <!-- ===== HERO SECTION ===== -->
    <section class="hero" id="hero">
      <div class="container hero-container">
        <div class="hero-content">
          <h1 class="hero-title">Barcelona Viability Insights 2026</h1>
          <p class="hero-subtitle">
            Â¿Puedes permitirte vivir en Barcelona con tu salario?
          </p>
          <p class="hero-description">
            Estudio socioeconÃ³mico multidimensional de alto impacto para el
            sector tecnolÃ³gico y digital
          </p>

          <div class="hero-stats">
            <div class="stat-card">
              <div class="stat-top-line">
                <i class="fas fa-chart-pie stat-icon"></i>
                <div class="stat-number">9</div>
              </div>
              <div class="stat-label">Perfiles analizados</div>
            </div>
            <div class="stat-card">
              <div class="stat-top-line">
                <i class="fas fa-city stat-icon"></i>
                <div class="stat-number">7</div>
              </div>
              <div class="stat-label">Distritos analizados</div>
            </div>
            <div class="stat-card">
              <div class="stat-top-line">
                <i class="fas fa-tachometer-alt stat-icon"></i>
                <div class="stat-number">56%</div>
              </div>
              <div class="stat-label">Esfuerzo salarial medio*</div>
            </div>
            <div class="stat-label">
              <em
                >*RelaciÃ³n entre el alquiler promedio mensual y la mediana del
                salario bruto mensual agregado.</em
              >
            </div>
          </div>

          <div class="hero-cta">
            <a href="#dashboard-section" class="cta-button primary">
              <i class="fas fa-search"></i> Explorar Dashboard
            </a>
            <a href="#insights-section" class="cta-button secondary">
              <i class="fas fa-lightbulb"></i> Ver Insights
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== DASHBOARD SECTION ===== -->
    <section class="dashboard-section" id="dashboard-section">
      <div class="container">
        <div class="section-header">
          <h2><i class="fas fa-chart-bar"></i> Dashboard Interactivo</h2>
          <p class="dashboard-intro">
            Explora los 3 Análisis cruzados entre salarios y alquileres y
            descubre el mejor distrito para vivir en Barcelona segÃºn tu perfil
            profesional. Incluye datos de interÃ©s como salarios medios del
            sector tecnolÃ³gico/digital, precio de alquiler promedio por distrito
            y % de esfuerzo salarial mÃ­nimo por barrios.
          </p>
        </div>

        <div class="dashboard-layout">
          <!-- COLUMNA IZQUIERDA: MENÃš VERTICAL -->
          <aside class="dashboard-sidebar dashboard-sidebar-sticky">
            <nav class="dashboard-nav" id="dashboardNav">
              <a href="#vision-general" class="dashboard-nav-item active">
                <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                <span class="nav-text">Resumen</span>
              </a>
              <a href="#accessibility-section" class="dashboard-nav-item">
                <span class="nav-icon"><i class="fas fa-percentage"></i></span>
                <span class="nav-text">Accesibilidad</span>
              </a>
              <a href="#seniority-section" class="dashboard-nav-item">
                <span class="nav-icon"><i class="fas fa-users"></i></span>
                <span class="nav-text">Seniority</span>
              </a>
            </nav>
          </aside>

          <!-- COLUMNA DERECHA: CONTENIDO PRINCIPAL -->
          <main class="dashboard-main" id="dashboardMain">
            <!-- PÃ¡gina ÃšNICA: Resumen con 3 subsecciones -->
            <article class="dashboard-page active" id="vision-general">
              <h3>Resumen</h3>
              <p class="page-description">
                Â¿En quÃ© distrito de Barcelona te puedes permitir vivir segÃºn tu
                perfil profesional?<br />
                Analizamos cuÃ¡l es el distrito mÃ¡s viable econÃ³micamente, los
                barrios mÃ¡s accesibles y el % de esfuerzo salarial requerido en
                cada uno.
              </p>

              <!-- FILTROS INTERACTIVOS -->
              <div class="dashboard-filters" id="dashboardFilters">
                <div class="filters-container">
                  <div class="filter-group">
                    <label for="categoryFilter"
                      ><i class="fas fa-briefcase"></i> CategorÃ­a Laboral</label
                    >
                    <select id="categoryFilter" class="filter-select">
                      <option value="all">Todas las categorÃ­as</option>
                      <option value="Technology">Technology</option>
                      <option value="Marketing">Marketing</option>
                      <option value="Design">Design</option>
                    </select>
                  </div>

                  <div class="filter-group">
                    <label for="levelFilter"
                      ><i class="fas fa-user-graduate"></i> Nivel Laboral</label
                    >
                    <select id="levelFilter" class="filter-select">
                      <option value="all">Todos los niveles</option>
                      <option value="Junior">Junior</option>
                      <option value="Mid">Mid</option>
                      <option value="Senior">Senior</option>
                    </select>
                  </div>

                  <div class="filter-group">
                    <label for="typeFilter"
                      ><i class="fas fa-home"></i> Tipo de Casa</label
                    >
                    <select id="typeFilter" class="filter-select">
                      <option value="all">Todos los tipos</option>
                      <option value="Estudio">Estudio</option>
                      <option value="1 hab.">1 habitaciÃ³n</option>
                    </select>
                  </div>

                  <div class="filter-group">
                    <label for="districtFilter"
                      ><i class="fas fa-map-marker-alt"></i> Distrito</label
                    >
                    <select id="districtFilter" class="filter-select">
                      <option value="all">Todos los distritos</option>
                      <option value="Ciutat Vella">Ciutat Vella</option>
                      <option value="Eixample">Eixample</option>
                      <option value="GrÃ cia">GrÃ cia</option>
                      <option value="Les Corts">Les Corts</option>
                      <option value="Sant MartÃ­">Sant MartÃ­</option>
                      <option value="Sants-MontjuÃ¯c">Sants-MontjuÃ¯c</option>
                      <option value="SarriÃ -Sant Gervasi">
                        SarriÃ -Sant Gervasi
                      </option>
                    </select>

                    <!-- BOTÃ“N DISCRETO DEBAJO DEL FILTRO DE DISTRITOS -->
                    <button class="reset-filters-btn" id="resetFiltersBtn">
                      <i class="fas fa-times-circle"></i> Borrar filtros
                    </button>
                  </div>
                </div>
              </div>

              <!-- CONTENEDOR DE TARJETAS KPI -->
              <div class="kpi-cards-container" id="kpiCardsContainer">
                <div class="kpi-card">
                  <div class="kpi-card-icon">
                    <i class="fas fa-euro-sign"></i>
                  </div>
                  <div class="kpi-card-content">
                    <div class="kpi-card-label">Salario Bruto Mensual</div>
                    <div class="kpi-card-value">3.500 â‚¬</div>
                    <div class="kpi-card-subtext">Technology Senior</div>
                  </div>
                </div>

                <div class="kpi-card">
                  <div class="kpi-card-icon">
                    <i class="fas fa-home"></i>
                  </div>
                  <div class="kpi-card-content">
                    <div class="kpi-card-label">Alquiler Promedio</div>
                    <div class="kpi-card-value">1.125 â‚¬</div>
                    <div class="kpi-card-subtext">Estudio en Ciutat Vella</div>
                  </div>
                </div>

                <div class="kpi-card">
                  <div class="kpi-card-icon">
                    <i class="fas fa-chart-bar"></i>
                  </div>
                  <div class="kpi-card-content">
                    <div class="kpi-card-label">% Esfuerzo MÃ­nimo</div>
                    <div class="kpi-card-value">32,14%</div>
                    <div class="kpi-card-subtext">
                      Mejor barrio en Ciutat Vella
                    </div>
                  </div>
                </div>
              </div>

              <!-- CONTENEDOR PARA LA TABLA Y GRÃFICO (ANÃLISIS DETALLADO) -->
              <div class="dashboard-visuals-container">
                <div class="visuals-section">
                  <h4>
                    Tabla de Análisis de viabilidad segÃºn los filtros aplicados
                  </h4>
                  <div class="table-placeholder" id="detail-table">
                    <p>
                      La tabla de barrios, alquileres y viabilidad aparecerÃ¡
                      aquÃ­.
                    </p>
                  </div>
                </div>

                <div class="visuals-section">
                  <h4>Esfuerzo Salarial por Barrios</h4>
                  <div class="chart-placeholder" id="chart-visualization">
                    <p>El grÃ¡fico de barras horizontales aparecerÃ¡ aquÃ­.</p>
                  </div>
                </div>
              </div>

              <!-- ===== SUBSECCIÃ“N DE ACCESIBILIDAD INTEGRADA ===== -->
              <section id="accessibility-section" class="dashboard-subsection">
                <div class="subsection-header">
                  <h3><i class="fas fa-percentage"></i> Accesibilidad</h3>
                  <p class="page-description">
                    Â¿QuÃ© % de esfuerzo salarial destina cada perfil profesional
                    en cada distrito sobre salario bruto?<br />
                    Resumen comparativo de los 9 perfiles profesionales y los 7
                    distritos analizados para visualizar quÃ© % de salario tiene
                    que destinar al alquiler cada perfil profesional en cada
                    distrito.
                  </p>
                </div>

                <!-- Contenedor para tabla/matriz -->
                <div class="dashboard-visuals-container">
                  <div class="visuals-section">
                    <h4>
                      Análisis Comparativo: Esfuerzo por Distrito y Perfil
                    </h4>
                    <p class="section-description">
                      Matriz de calor que muestra el menor porcentaje de
                      esfuerzo salarial para cada combinaciÃ³n de perfil
                      profesional (Technology/Marketing/Design Ã—
                      Junior/Mid/Senior) y distrito de Barcelona.
                      <br /><small
                        ><i class="fas fa-info-circle"></i> Datos estÃ¡ticos -
                        independiente de los filtros aplicados arriba.</small
                      >
                    </p>

                    <!-- Contenedor donde se renderizarÃ¡ la matriz -->
                    <div
                      class="visualization-container"
                      id="accessibility-heatmap-container"
                    >
                      <!-- La matriz de calor se renderizarÃ¡ aquÃ­ automÃ¡ticamente -->
                    </div>
                  </div>

                  <!-- GrÃ¡fico de ranking por distritos -->
                  <div class="visuals-section">
                    <h4>Esfuerzo Salarial por Distritos</h4>
                    <p class="section-description">
                      ClasificaciÃ³n de los 7 distritos de Barcelona segÃºn el %
                      esfuerzo salarial mÃ­nimo entre todos los perfiles
                      profesionales analizados.
                    </p>

                    <div class="chart-placeholder" id="district-ranking-chart">
                      <div class="data-message">
                        <div class="message-icon">ðŸ“ˆ</div>
                        <h5>GrÃ¡fico de Ranking (PrÃ³ximamente)</h5>
                        <p>
                          ClasificaciÃ³n de los 7 distritos de Barcelona segÃºn el
                          % esfuerzo salarial mÃ­nimo entre todos los perfiles
                          profesionales analizados.
                        </p>
                        <div class="preview-items">
                          <div class="preview-item">
                            <span class="preview-rank">1Âº</span>
                            <span class="preview-district">Sant MartÃ­</span>
                            <span class="preview-value">~26% esfuerzo</span>
                          </div>
                          <div class="preview-item">
                            <span class="preview-rank">2Âº</span>
                            <span class="preview-district">Sants-MontjuÃ¯c</span>
                            <span class="preview-value">~28% esfuerzo</span>
                          </div>
                          <div class="preview-item">
                            <span class="preview-rank">3Âº</span>
                            <span class="preview-district">Eixample</span>
                            <span class="preview-value">~31% esfuerzo</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>

              <!-- ===== SUBSECCIÃ“N DE SENIORITY INTEGRADA ===== -->
              <section id="seniority-section" class="dashboard-subsection">
                <div class="subsection-header">
                  <h3><i class="fas fa-users"></i> Seniority</h3>
                  <p class="page-description">
                    Â¿CÃ³mo transforma la experiencia profesional el acceso a la
                    vivienda y al entorno urbano?<br />
                    Comparativa de salarios promedios entre los perfiles Junior
                    y los perfiles Senior de TecnologÃ­a, Marketing y DiseÃ±o.
                  </p>
                </div>

                <div class="dashboard-visuals-container">
                  <div class="visuals-section">
                    <h4>
                      Comparativa % de esfuerzo salarial Junior vs Senior por
                      CategorÃ­a
                    </h4>
                    <p class="section-description">
                      GrÃ¡fico de columnas comparativo con el % de esfuerzo
                      salarial entre Junior y Senior de cada categorÃ­a:
                      Technology, Marketing y Design.
                      <br /><small
                        ><i class="fas fa-info-circle"></i> Datos estÃ¡ticos -
                        independiente de los filtros aplicados arriba.</small
                      >
                    </p>

                    <!-- CAMBIO: Ahora es un contenedor .html-chart directamente -->
                    <div class="html-chart" id="seniority-comparison-chart">
                      <!-- El contenido serÃ¡ generado por seniority-manager.js directamente aquÃ­ -->
                    </div>
                  </div>

                  <div class="visuals-section">
                    <h4>
                      Esfuerzo salarial de todas las categorÃ­as de Junior y
                      Senior
                    </h4>
                    <p class="section-description">
                      GrÃ¡fico de barras con el % de esfuerzo salarial de todas
                      las categorÃ­as de Junior y Senior.
                    </p>

                    <!-- CAMBIO: TambiÃ©n cambiado a .html-chart para consistencia -->
                    <div class="html-chart" id="salary-difference-chart">
                      <!-- El contenido serÃ¡ generado por seniority-manager.js directamente aquÃ­ -->
                    </div>
                  </div>
                </div>
              </section>
            </article>

            <!-- NO HAY MÃS PÃGINAS REDIRECCIONALES -->
          </main>
        </div>
      </div>
    </section>

    <!-- ===== BANNER DESCARGA INFORME PDF ===== -->
    <section class="report-banner" id="reportBanner">
      <div class="container">
        <div class="report-banner-content">
          <div class="banner-text">
            <h3>
              <i class="fas fa-file-pdf"></i> Informe de Análisis Completo
            </h3>
            <p>
              Descarga el estudio detallado con la metodologÃ­a completa, datos
              tabulados, grÃ¡ficos estÃ¡ticos y conclusiones ejecutivas.
            </p>
            <ul class="banner-features">
              <li><i class="fas fa-check"></i> MetodologÃ­a paso a paso</li>
              <li><i class="fas fa-check"></i> Datos tratados y tabulados</li>
              <li><i class="fas fa-check"></i> Conclusiones accionables</li>
              <li><i class="fas fa-check"></i> GrÃ¡ficos de alta calidad</li>
            </ul>
          </div>
          <div class="banner-action">
            <a
              href="docs/barcelona-viability-insights.pdf"
              download
              class="btn-download-pdf"
              id="downloadReportBtn"
            >
              <i class="fas fa-download"></i> Descargar informe en PDF
            </a>

            <small>Documento de portfolio. Datos anonimizados.</small>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== INSIGHTS DESTACADOS ===== -->
    <section class="highlighted-insights" id="insights-section">
      <div class="container">
        <div class="section-header">
          <h2><i class="fas fa-star"></i> Insights Destacados</h2>
          <p>Hallazgos clave del Análisis para lectura rÃ¡pida</p>
        </div>

        <div class="insights-grid">
          <article class="insight-card">
            <div class="insight-header">
              <span class="insight-category">ðŸ“Š Tendencia Principal</span>
              <span class="insight-badge critical">CrÃ­tico</span>
            </div>
            <h3 class="insight-title">
              La seniority marca la diferencia en la viabilidad residencial
            </h3>
            <div class="insight-content">
              <p>
                El <strong>95% de los perfiles junior</strong> se sitÃºan en
                rangos de esfuerzo salarial elevados, mientras que los perfiles
                senior muestran ratios claramente viables, especialmente en
                tecnologÃ­a.
              </p>
            </div>
            <div class="insight-stats">
              <div class="insight-stat">
                <div class="stat-value">95%</div>
                <div class="stat-label">Juniors en rango limitado</div>
              </div>
              <div class="insight-stat">
                <div class="stat-value">&lt;20%</div>
                <div class="stat-label">Ratio Tech Senior (bruto)</div>
              </div>
            </div>
          </article>

          <article class="insight-card">
            <div class="insight-header">
              <span class="insight-category">ðŸ’¼ Sector MÃ¡s Vulnerable</span>
              <span class="insight-badge warning">Alerta</span>
            </div>
            <h3 class="insight-title">
              DiseÃ±o junior concentra los mayores niveles de tensiÃ³n salarial
            </h3>
            <div class="insight-content">
              <p>
                Los perfiles junior de diseÃ±o presentan los
                <strong>ratios de esfuerzo salarial mÃ¡s elevados</strong> del
                Análisis, situÃ¡ndose sistemÃ¡ticamente en rangos de viabilidad
                limitada incluso sobre salario bruto.
              </p>
            </div>
            <div class="insight-stats">
              <div class="insight-stat">
                <div class="stat-value">~39%</div>
                <div class="stat-label">Ratio Design Jr (bruto)</div>
              </div>
              <div class="insight-stat">
                <div class="stat-value">1.708 â‚¬</div>
                <div class="stat-label">Mediana salarial mensual</div>
              </div>
            </div>
          </article>

          <article class="insight-card">
            <div class="insight-header">
              <span class="insight-category">ðŸ™ï¸ Disparidad GeogrÃ¡fica</span>
              <span class="insight-badge info">Análisis</span>
            </div>
            <h3 class="insight-title">
              GrÃ cia exige mÃ¡s esfuerzo salarial que distritos tradicionalmente
              caros
            </h3>
            <div class="insight-content">
              <p>
                Aunque no es el distrito con los alquileres mÃ¡s altos,
                <strong
                  >GrÃ cia presenta el mayor % de esfuerzo salarial
                  mÃ­nimo</strong
                >
                del Análisis, superando a distritos como SarriÃ -Sant Gervasi y
                Les Corts.
              </p>
            </div>
            <div class="insight-stats">
              <div class="insight-stat">
                <div class="stat-value">+34%</div>
                <div class="stat-label">Esfuerzo salarial GrÃ cia</div>
              </div>
              <div class="insight-stat">
                <div class="stat-value">1.527 â‚¬</div>
                <div class="stat-label">Alquiler promedio GrÃ cia</div>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- ===== METODOLOGÃA (ACORDEÃ“N) ===== -->
    <section class="methodology" id="methodology-section">
      <div class="container">
        <div class="section-header">
          <h2><i class="fas fa-clipboard-list"></i> MetodologÃ­a</h2>
          <p>Proceso de Análisis, modelado y visualizaciÃ³n de datos</p>
        </div>

        <div class="accordion" id="methodologyAccordion">
          <div class="accordion-item active">
            <button class="accordion-header">
              <span class="accordion-number">1</span>
              <h3>PreparaciÃ³n y Análisis</h3>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="accordion-content">
              <div class="phase-content">
                <h4>RecolecciÃ³n de Datos</h4>
                <p>
                  <strong>Salarios:</strong> 153 ofertas reales de empleo del
                  sector tecnolÃ³gico y digital (InfoJobs y Domestika).
                </p>
                <ul>
                  <li>
                    Ofertas a jornada completa y con salario publicado
                    (diciembre 2025).
                  </li>
                  <li>CategorÃ­as: InformÃ¡tica, Marketing y DiseÃ±o.</li>
                </ul>

                <p>
                  <strong>Alquileres:</strong> 140 anuncios reales de vivienda
                  en alquiler (Idealista).
                </p>
                <ul>
                  <li>Muestreo por orden de publicaciÃ³n. (enero 2026).</li>
                  <li>
                    TipologÃ­as: 10 estudios y 10 viviendas de 1 habitaciÃ³n por
                    distrito.
                  </li>
                </ul>

                <h4>Procesamiento y Limpieza</h4>
                <ul>
                  <li>
                    Uso de <strong>salario bruto mensual</strong>, extraÃ­do del
                    valor medio del rango salarial de las ofertas publicadas.
                  </li>
                  <li>
                    Uso de <strong>medianas</strong> en lugar de promedios para
                    el salario mensual por categorÃ­a y/o nivel, reduciendo el
                    impacto de valores atÃ­picos.
                  </li>
                  <li>UnificaciÃ³n de formatos de distritos y barrios.</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <button class="accordion-header">
              <span class="accordion-number">2</span>
              <h3>Desarrollo y Modelado</h3>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="accordion-content">
              <div class="phase-content">
                <h4>Análisis Cruzado</h4>
                <ul>
                  <li>
                    <strong>Esfuerzo salarial</strong>: (Alquiler mensual /
                    Salario bruto mensual) Ã— 100.
                  </li>
                  <li>
                    SegmentaciÃ³n por categorÃ­a profesional, nivel de Seniority,
                    tipo de vivienda y distrito.
                  </li>
                  <li>
                    IdentificaciÃ³n del esfuerzo salarial mÃ­nimo por combinaciÃ³n
                    de filtros.
                  </li>
                </ul>

                <h4>ClasificaciÃ³n de viabilidad</h4>
                <ul>
                  <li>âœ… Viable (&lt;30%)</li>
                  <li>âš ï¸ Limitado (31-45%)</li>
                  <li>âŒ Inviable (&gt;46%)</li>
                </ul>

                <h4>Modelado de Datos</h4>
                <ul>
                  <li>
                    Estructura de datos modular en JavaScript mediante tablas
                    relacionadas.
                  </li>
                  <li>
                    CÃ¡lculos dinÃ¡micos en tiempo real: mediana salarial,
                    alquiler promedio, esfuerzo salarial mÃ­nimo y viabilidad.
                  </li>
                  <li>
                    Sistema de filtros interconectados que actualiza mÃºltiples
                    visualizaciones simultÃ¡neamente.
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <button class="accordion-header">
              <span class="accordion-number">3</span>
              <h3>VisualizaciÃ³n y ValidaciÃ³n</h3>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="accordion-content">
              <div class="phase-content">
                <h4>DiseÃ±o del Dashboard</h4>
                <ul>
                  <li>
                    SelecciÃ³n de visualizaciones adecuadas para cada mÃ©trica.
                  </li>
                  <li>
                    Uso de iconografÃ­a y jerarquÃ­a visual para representar
                    niveles de viabilidad.
                  </li>
                  <li>
                    ImplementaciÃ³n de tooltips informativos con contexto
                    metodolÃ³gico.
                  </li>
                  <li>OptimizaciÃ³n responsive para distintos dispositivos.</li>
                </ul>

                <h4>ValidaciÃ³n y Testing</h4>
                <ul>
                  <li>
                    VerificaciÃ³n cruzada con informes y referencias pÃºblicas del
                    mercado.
                  </li>
                  <li>Testing de usabilidad con perfiles objetivo.</li>
                  <li>Ajuste de umbrales de clasificaciÃ³n segÃºn feedback.</li>
                  <li>DocumentaciÃ³n completa del proceso analÃ­tico.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="methodology-footer">
          <div class="limitations">
            <h4>
              <i class="fas fa-exclamation-triangle"></i> Limitaciones del
              Estudio
            </h4>
            <div>
              <p>
                Este Análisis representa una instantÃ¡nea del mercado entre
                diciembre de 2025 y enero de 2026.<br />
                No incluye gastos adicionales asociados a la vivienda
                (suministros, comunidad u otros).<br />
                No incluye salarios negociados fuera de ofertas pÃºblicas.<br />
                Los precios de alquiler pueden variar segÃºn el estado y
                caracterÃ­sticas del inmueble.
              </p>
            </div>
            <div class="data-source-note">
              <small
                ><i class="fas fa-database"></i> Datos: InfoJobs, Domestika e
                Idealista (diciembre 2025 - enero 2026)</small
              >
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== ABOUT ===== -->
    <section class="about" id="about-section">
      <div class="container">
        <div class="section-header">
          <h2><i class="fas fa-user-tie"></i> About</h2>
          <p>Contexto profesional y stack tecnolÃ³gico</p>
        </div>

        <div class="about-content">
          <div class="about-card">
            <div class="about-card-header">
              <div class="profile-avatar">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="profile-info">
                <h3>Isabel Abad</h3>
                <p class="profile-title">Data Analyst & Data Storyteller</p>
                <div class="profile-tags">
                  <span class="profile-tag">Data Analysis</span>
                  <span class="profile-tag">Business Intelligence</span>
                  <span class="profile-tag">Data Visualization</span>
                </div>
              </div>
            </div>

            <div class="about-card-body">
              <p>
                Este proyecto forma parte de mi portfolio profesional y refleja
                mi capacidad para:
              </p>

              <div class="capabilities-grid">
                <div class="capability">
                  <div class="capability-icon">
                    <i class="fas fa-database"></i>
                  </div>
                  <h4>Análisis cruzado de datos</h4>
                  <p>
                    IntegraciÃ³n de mÃºltiples fuentes de informaciÃ³n en un
                    Análisis coherente
                  </p>
                </div>

                <div class="capability">
                  <div class="capability-icon">
                    <i class="fas fa-chart-bar"></i>
                  </div>
                  <h4>VisualizaciÃ³n interactiva</h4>
                  <p>
                    DiseÃ±o de dashboards orientados a responder preguntas reales
                  </p>
                </div>

                <div class="capability">
                  <div class="capability-icon">
                    <i class="fas fa-comment-alt"></i>
                  </div>
                  <h4>Storytelling con datos</h4>
                  <p>
                    ComunicaciÃ³n clara de hallazgos complejos mediante narrativa
                    visual
                  </p>
                </div>
              </div>
            </div>

            <div class="about-card-footer">
              <div class="tech-stack">
                <h4><i class="fas fa-tools"></i> Stack TecnolÃ³gico</h4>
                <div class="tech-tags">
                  <span class="tech-tag"
                    ><i class="fa-solid fa-file-excel"></i> Excel</span
                  >
                  <span class="tech-tag"
                    ><i class="fa-solid fa-magnifying-glass-chart"></i> Power
                    Query</span
                  >
                  <span class="tech-tag"
                    ><i class="fa-jelly-fill fa-regular fa-chart-bar"></i> Power
                    BI</span
                  >
                  <span class="tech-tag"
                    ><i class="fa-brands fa-html5"></i> HTML</span
                  >
                  <span class="tech-tag"
                    ><i class="fa-brands fa-css3-alt"></i> CSS</span
                  >
                  <span class="tech-tag"
                    ><i class="fa-brands fa-js"></i> JavaScript</span
                  >
                  <span class="tech-tag"
                    ><i class="fa-brands fa-git-alt"></i> Git</span
                  >
                </div>
              </div>
            </div>

            <div class="profile-links">
              <div class="social-tags">
                <h4><i class="fa-solid fa-message"></i> Contacto</h4>
                <div>
                  <a
                    href="https://www.linkedin.com/in/abadisabel"
                    target="_blank"
                    class="profile-link"
                  >
                    <i class="fab fa-linkedin"></i> LinkedIn
                  </a>
                  <a
                    href="https://github.com/Sisuca"
                    target="_blank"
                    class="profile-link"
                  >
                    <i class="fab fa-github"></i> GitHub
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== FOOTER ===== -->
    <footer class="main-footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-brand">
            <div class="footer-logo">
              <i class="fas fa-chart-line"></i>
              <h3>Barcelona Viability Insights</h3>
            </div>
            <p class="footer-description">
              Data product interactivo<br />
              Análisis de salarios y alquiler<br />
              Barcelona 2026
            </p>
          </div>

          <div class="footer-links">
            <div class="link-group">
              <h4>Explorar</h4>
              <a href="#dashboard-section">Dashboard</a>
              <a href="#insights-section">Insights</a>
              <a href="#methodology-section">MetodologÃ­a</a>
            </div>

            <div class="link-group">
              <h4>Recursos</h4>
              <a href="#" data-modal="datasets">Descargar Datasets</a>
              <a href="#" data-modal="code">Ver Repositorio</a>
              <a href="#about-section">About</a>
            </div>
          </div>

          <div class="footer-legal">
            <p>
              Â© 2026 Barcelona Viability Insights â€¢ Proyecto de portfolio
              profesional
            </p>
            <p class="legal-note">
              Los datos se presentan con fines analÃ­ticos y de portfolio.<br />
              Consulta la metodologÃ­a para conocer el contexto y las
              limitaciones del estudio.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- ===== SCRIPTS ===== -->

    <!-- 1. Datos -->
    <script src="js/data/rent-data.js"></script>
    <script src="js/data/profiles-data.js"></script>

    <!-- 2. Procesador central -->
    <script src="js/data-processor-final.js"></script>

    <!-- 3. Dashboard Manager -->
    <script src="js/dashboard-manager.js"></script>

    <!-- 4. Managers existentes -->
    <script src="js/filters-manager.js"></script>
    <script src="js/kpi-cards.js"></script>
    <script src="js/table-manager.js"></script>

    <!-- 5. Nuevo: Accessibility Heatmap Manager -->
    <script src="js/accessibility-heatmap.js"></script>

    <!-- 6. Nuevo: Seniority Manager -->
    <script src="js/seniority-manager.js"></script>

    <!-- 7. Inicializador -->
    <script src="js/app-initializer.js"></script>

    <!-- 8. Funcionalidades generales -->
    <script src="js/main.js"></script>

    <!-- 9. SIDEBAR STICKY FIXED - VERSIÃ“N COMPLETA -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const sidebar = document.querySelector(".dashboard-sidebar");
        const header = document.querySelector(".main-header");
        const dashboardSection = document.querySelector("#dashboard-section");

        if (!sidebar || !dashboardSection) return;

        // 1. Crear placeholder para mantener el espacio
        const placeholder = document.createElement("div");
        placeholder.className = "sidebar-placeholder";
        sidebar.parentNode.insertBefore(placeholder, sidebar);

        // 2. Configurar medidas
        let isMobile = window.innerWidth <= 768;
        let isFixed = false;
        let originalSidebarRect = null;

        function saveOriginalPosition() {
          if (!originalSidebarRect) {
            originalSidebarRect = sidebar.getBoundingClientRect();
          }
        }

        function updateSidebar() {
          if (!sidebar || !dashboardSection) return;

          const headerHeight = header ? header.offsetHeight : 72;
          const scrollY = window.scrollY;

          // Actualizar estado mÃ³vil
          isMobile = window.innerWidth <= 768;

          // Guardar posiciÃ³n original si no estÃ¡ guardada
          saveOriginalPosition();

          // Obtener posiciones de la secciÃ³n
          const sectionTop = dashboardSection.offsetTop - headerHeight - 20;
          const sectionBottom = sectionTop + dashboardSection.offsetHeight;

          // Â¿Estamos dentro de la secciÃ³n dashboard?
          const isInDashboardSection =
            scrollY >= sectionTop && scrollY <= sectionBottom;

          if (isMobile) {
            // MÃ“VIL: sticky simple con CSS
            handleMobile();
          } else {
            // DESKTOP: comportamiento controlado
            handleDesktop(
              isInDashboardSection,
              scrollY,
              sectionTop,
              sectionBottom,
              headerHeight,
            );
          }
        }

        function handleMobile() {
          // Solo asegurar que no estÃ© fijo en mÃ³vil
          if (isFixed) {
            sidebar.style.position = "";
            sidebar.style.top = "";
            sidebar.style.left = "";
            sidebar.style.width = "";
            sidebar.style.zIndex = "";
            sidebar.style.boxShadow = "";
            sidebar.classList.remove("fixed-sidebar");
            isFixed = false;
          }

          placeholder.style.display = "none";

          // CSS se encarga del sticky en mÃ³vil
          sidebar.style.position = "sticky";
          sidebar.style.top = "72px";
        }

        function handleDesktop(
          isInDashboardSection,
          scrollY,
          sectionTop,
          sectionBottom,
          headerHeight,
        ) {
          const container = document.querySelector(
            ".dashboard-section .container",
          );
          if (!container) return;

          const containerRect = container.getBoundingClientRect();
          const sidebarRect = sidebar.getBoundingClientRect();
          const viewportHeight = window.innerHeight;

          if (isInDashboardSection) {
            // DENTRO de la secciÃ³n: aplicar fixed
            if (!isFixed) {
              // Calcular posiciÃ³n izquierda basada en el contenedor
              const leftPosition = containerRect.left + window.scrollX;

              // Aplicar fixed
              sidebar.style.position = "fixed";
              sidebar.style.top = "100px";
              sidebar.style.left = `${leftPosition}px`;
              sidebar.style.width = `${sidebarRect.width}px`;
              sidebar.style.zIndex = "90";
              sidebar.style.boxShadow = "0 4px 20px rgba(0,0,0,0.1)";
              sidebar.classList.add("fixed-sidebar");

              // Mostrar placeholder
              placeholder.style.display = "block";
              placeholder.style.width = `${sidebarRect.width}px`;
              placeholder.style.height = `${sidebarRect.height}px`;
              placeholder.style.flexShrink = "0";

              isFixed = true;
            }

            // Ajustar posiciÃ³n vertical si estÃ¡ cerca del final
            const distanceFromBottom = sectionBottom - scrollY;
            const sidebarHeight = sidebar.offsetHeight;

            if (distanceFromBottom < sidebarHeight + 100) {
              // Cerca del final: subir el sidebar
              const newTop = Math.max(
                20, // MÃ­nimo 20px desde top
                distanceFromBottom - sidebarHeight - 20,
              );
              sidebar.style.top = `${newTop}px`;
            } else {
              // PosiciÃ³n normal
              sidebar.style.top = "100px";
            }
          } else {
            // FUERA de la secciÃ³n: restaurar posiciÃ³n normal
            if (isFixed) {
              sidebar.style.position = "";
              sidebar.style.top = "";
              sidebar.style.left = "";
              sidebar.style.width = "";
              sidebar.style.zIndex = "";
              sidebar.style.boxShadow = "";
              sidebar.classList.remove("fixed-sidebar");

              placeholder.style.display = "none";
              isFixed = false;
            }
          }
        }

        // 3. Event listeners
        function handleScroll() {
          requestAnimationFrame(updateSidebar);
        }

        window.addEventListener("scroll", handleScroll);

        window.addEventListener("resize", function () {
          // Resetear en resize
          if (isFixed) {
            sidebar.style.position = "";
            sidebar.style.top = "";
            sidebar.style.left = "";
            sidebar.style.width = "";
            sidebar.classList.remove("fixed-sidebar");
            isFixed = false;
          }

          placeholder.style.display = "none";
          originalSidebarRect = null; // Forzar recalcular

          // PequeÃ±o delay para que termine el resize
          setTimeout(updateSidebar, 150);
        });

        // 4. NavegaciÃ³n activa por scroll (MOBILE + DESKTOP)
        const subsectionIds = [
          "vision-general",
          "accessibility-section",
          "seniority-section",
        ];
        const subsectionElements = {};
        const navItems = {};

        // Inicializar elementos
        subsectionIds.forEach((id) => {
          const element = document.getElementById(id);
          if (element) {
            subsectionElements[id] = element;

            const navItem = document.querySelector(
              `.dashboard-nav-item[href="#${id}"]`,
            );
            if (navItem) {
              navItems[id] = navItem;
            }
          }
        });

        function updateActiveNav() {
          // Offset diferente para mÃ³vil vs desktop
          const headerHeight = header ? header.offsetHeight : 72;
          const isMobileView = window.innerWidth <= 768;

          // En mÃ³vil, el sidebar sticky ocupa espacio, necesitamos mÃ¡s offset
          const scrollOffset = isMobileView
            ? headerHeight + 100 // MÃ³vil: header + sidebar
            : headerHeight + 50; // Desktop: solo header + margen

          const scrollY = window.scrollY + scrollOffset;
          let activeId = null;
          let closestDistance = Infinity;

          Object.entries(subsectionElements).forEach(([id, element]) => {
            if (!element) return;

            const rect = element.getBoundingClientRect();
            const elementTop = window.scrollY + rect.top;
            const elementBottom = elementTop + rect.height;

            // Verificar si el elemento estÃ¡ en el viewport
            const isInViewport =
              scrollY >= elementTop && scrollY <= elementBottom;
            const distanceToTop = Math.abs(scrollY - elementTop);

            // Priorizar: primero elementos en viewport, luego el mÃ¡s cercano
            if (isInViewport) {
              closestDistance = 0;
              activeId = id;
            } else if (distanceToTop < closestDistance && closestDistance > 0) {
              closestDistance = distanceToTop;
              activeId = id;
            }
          });

          // Si encontramos una secciÃ³n activa, actualizar menÃº
          if (activeId) {
            Object.entries(navItems).forEach(([id, navItem]) => {
              if (navItem) {
                if (id === activeId) {
                  navItem.classList.add("active");
                } else {
                  navItem.classList.remove("active");
                }
              }
            });
          }

          // Si no hay ninguna activa y estamos en la parte superior, activar "Resumen"
          if (!activeId && scrollY < 300 && navItems["vision-general"]) {
            Object.entries(navItems).forEach(([id, navItem]) => {
              if (navItem) {
                navItem.classList.remove("active");
              }
            });
            navItems["vision-general"].classList.add("active");
          }
        }

        // 5. Scroll suave al hacer click en menÃº (MOBILE + DESKTOP)
        document.querySelectorAll(".dashboard-nav-item").forEach((item) => {
          item.addEventListener("click", function (e) {
            if (this.getAttribute("href").startsWith("#")) {
              e.preventDefault();
              const targetId = this.getAttribute("href").substring(1);
              const targetElement = document.getElementById(targetId);

              if (targetElement) {
                const headerHeight = header ? header.offsetHeight : 72;
                const isMobileView = window.innerWidth <= 768;

                // Offset diferente para mÃ³vil (sidebar sticky ocupa espacio)
                const sidebarOffset = isMobileView ? 140 : 130;
                const offset = headerHeight + sidebarOffset;

                const targetPosition = targetElement.offsetTop - offset;

                window.scrollTo({
                  top: targetPosition,
                  behavior: "smooth",
                });

                // Actualizar activo inmediatamente
                document
                  .querySelectorAll(".dashboard-nav-item")
                  .forEach((nav) => {
                    nav.classList.remove("active");
                  });
                this.classList.add("active");
              }
            }
          });
        });

        // 6. Inicializar
        updateSidebar();

        // Actualizar navegaciÃ³n activa en scroll (para mÃ³vil y desktop)
        let navUpdateTimeout;
        const activeNavScrollHandler = function () {
          if (navUpdateTimeout) {
            cancelAnimationFrame(navUpdateTimeout);
          }
          navUpdateTimeout = requestAnimationFrame(updateActiveNav);
        };

        // Escuchar scroll para navegaciÃ³n activa (siempre, en mÃ³vil y desktop)
        window.addEventListener("scroll", activeNavScrollHandler);

        // TambiÃ©n actualizar en resize (por si cambia de mÃ³vil a desktop)
        window.addEventListener("resize", function () {
          setTimeout(updateActiveNav, 100);
        });

        updateActiveNav();

        console.log(
          "âœ… Sidebar sticky inicializado (completo: sticky + navegaciÃ³n activa mÃ³vil/desktop)",
        );
      });
    </script>
  </body>
</html>

